<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-155363330-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-155363330-1');
</script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.63.2" />
    <meta name="description" content="">
<meta name="author" content="Seungha Son">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>2. PID Namespace :: Developer&#39;s Delight</title>

    
    <link href="/css/nucleus.css?1580303065" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1580303065" rel="stylesheet">
    <link href="/css/hybrid.css?1580303065" rel="stylesheet">
    <link href="/css/featherlight.min.css?1580303065" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1580303065" rel="stylesheet">
    <link href="/css/auto-complete.css?1580303065" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1580303065" rel="stylesheet">
    <link href="/css/theme.css?1580303065" rel="stylesheet">
    <link href="/css/hugo-theme.css?1580303065" rel="stylesheet">
    
      <link href="/css/theme-purple.css?1580303065" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1580303065"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/container/namespace/2_pid_namespace/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://linuxias.github.io/">
<font size="5" color="white">DEVELOPER'S DELIGHT</font>
	<br>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1580303065"></script>
<script type="text/javascript" src="/js/auto-complete.js?1580303065"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/linuxias.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1580303065"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/linux/" title="1. Linux" class="dd-item 
        
        
        
        ">
      <a href="/linux/">
          1. Linux
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/linux/compilelink/" title="Compile&amp;Link" class="dd-item 
        
        
        
        ">
      <a href="/linux/compilelink/">
          Compile&amp;Link
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/linux/compilelink/gcc_warning_option/" title="[gcc] Warning 옵션" class="dd-item ">
        <a href="/linux/compilelink/gcc_warning_option/">
        [gcc] Warning 옵션
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/linux/compilelink/gcc_specific_attribute/" title="[gcc] 최적화 속성 사용하기" class="dd-item ">
        <a href="/linux/compilelink/gcc_specific_attribute/">
        [gcc] 최적화 속성 사용하기
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/linux/compilelink/staticliblink/" title="정적 라이브러리 링크" class="dd-item ">
        <a href="/linux/compilelink/staticliblink/">
        정적 라이브러리 링크
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/container/" title="2. Container" class="dd-item 
        parent
        
        
        ">
      <a href="/container/">
          2. Container
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/container/cgroup/" title="Cgroup" class="dd-item 
        
        
        
        ">
      <a href="/container/cgroup/">
          Cgroup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/container/cgroup/1.cgroup/" title="1. Cgroup" class="dd-item ">
        <a href="/container/cgroup/1.cgroup/">
        1. Cgroup
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/cgroup/2.cgroup_blkio/" title="2. blkio" class="dd-item ">
        <a href="/container/cgroup/2.cgroup_blkio/">
        2. blkio
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/cgroup/3.cgroup_memory/" title="3. memory" class="dd-item ">
        <a href="/container/cgroup/3.cgroup_memory/">
        3. memory
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/cgroup/4.cpu.cpuset.cpuacct/" title="4. cpu, cpuset, cpuaccet" class="dd-item ">
        <a href="/container/cgroup/4.cpu.cpuset.cpuacct/">
        4. cpu, cpuset, cpuaccet
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/container/namespace/" title="Namespace" class="dd-item 
        parent
        
        
        ">
      <a href="/container/namespace/">
          Namespace
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/container/namespace/1.what_is_namespace/" title="1. Namespace" class="dd-item ">
        <a href="/container/namespace/1.what_is_namespace/">
        1. Namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/namespace/2_pid_namespace/" title="2. PID Namespace" class="dd-item active">
        <a href="/container/namespace/2_pid_namespace/">
        2. PID Namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/namespace/3.user_namespace/" title="3. User Namespace" class="dd-item ">
        <a href="/container/namespace/3.user_namespace/">
        3. User Namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/namespace/4.qemu/" title="4. QEMU" class="dd-item ">
        <a href="/container/namespace/4.qemu/">
        4. QEMU
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/namespace/5_mount_namespace/" title="5. Mount namespace" class="dd-item ">
        <a href="/container/namespace/5_mount_namespace/">
        5. Mount namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/namespace/6.uts_namespace/" title="6. UTS namespace" class="dd-item ">
        <a href="/container/namespace/6.uts_namespace/">
        6. UTS namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/namespace/7.cgroup_namespace/" title="7. Cgroup Namespace" class="dd-item ">
        <a href="/container/namespace/7.cgroup_namespace/">
        7. Cgroup Namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/container/docker/" title="Docker" class="dd-item 
        
        
        
        ">
      <a href="/container/docker/">
          Docker
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/container/docker/1_docker_cmd_basic/" title="Docker Basic" class="dd-item ">
        <a href="/container/docker/1_docker_cmd_basic/">
        Docker Basic
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/docker/2_docker_storage/" title="Storage" class="dd-item ">
        <a href="/container/docker/2_docker_storage/">
        Storage
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/container/docker/container_logging/" title="[Logging] Overview" class="dd-item ">
        <a href="/container/docker/container_logging/">
        [Logging] Overview
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/sw_architecture/" title="3. S/W Architecture" class="dd-item 
        
        
        
        ">
      <a href="/sw_architecture/">
          3. S/W Architecture
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/sw_architecture/batch_sequential_architecture/" title="Batch Sequential Architecture" class="dd-item ">
        <a href="/sw_architecture/batch_sequential_architecture/">
        Batch Sequential Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/sw_architecture/data_flow_sw_architecture/" title="Data Flow Software Architecture" class="dd-item ">
        <a href="/sw_architecture/data_flow_sw_architecture/">
        Data Flow Software Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/sw_architecture/hierarchical_software_architecture/" title="Hierarchical Software Architecture" class="dd-item ">
        <a href="/sw_architecture/hierarchical_software_architecture/">
        Hierarchical Software Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/sw_architecture/pipe_and_filter_architecture/" title="Pipe and Filter Architecture" class="dd-item ">
        <a href="/sw_architecture/pipe_and_filter_architecture/">
        Pipe and Filter Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/sw_architecture/process_control_architecture/" title="Process Control Architecture" class="dd-item ">
        <a href="/sw_architecture/process_control_architecture/">
        Process Control Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/sw_architecture/sw_design_corruption/" title="소프트웨어 설계의 부패" class="dd-item ">
        <a href="/sw_architecture/sw_design_corruption/">
        소프트웨어 설계의 부패
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/machinelearning/" title="4. Machine Learning" class="dd-item 
        
        
        
        ">
      <a href="/machinelearning/">
          4. Machine Learning
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/machinelearning/basic/" title="Basic Theory" class="dd-item 
        
        
        
        ">
      <a href="/machinelearning/basic/">
          Basic Theory
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/machinelearning/basic/model_representation_and_cost_function/" title="1. Model Representation / Cost function" class="dd-item ">
        <a href="/machinelearning/basic/model_representation_and_cost_function/">
        1. Model Representation / Cost function
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/machinelearning/agent/" title="Software Agent" class="dd-item 
        
        
        
        ">
      <a href="/machinelearning/agent/">
          Software Agent
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/machinelearning/agent/bdi_architect/" title="[Agent] BDI Architecture" class="dd-item ">
        <a href="/machinelearning/agent/bdi_architect/">
        [Agent] BDI Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/machinelearning/agent/agent_communication/" title="[Agent] Communication" class="dd-item ">
        <a href="/machinelearning/agent/agent_communication/">
        [Agent] Communication
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/machinelearning/agent/agent_mas/" title="[Agent] MAS (Multi-agent System)" class="dd-item ">
        <a href="/machinelearning/agent/agent_mas/">
        [Agent] MAS (Multi-agent System)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/machinelearning/agent/agent_sw_agent_architecture/" title="[Agent] SW Agent Architecture" class="dd-item ">
        <a href="/machinelearning/agent/agent_sw_agent_architecture/">
        [Agent] SW Agent Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/books/" title="Books" class="dd-item 
        
        
        
        ">
      <a href="/books/">
          Books
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/books/readyforprogramminginterview/" title="프로그래밍 면접 이렇게 준비한다" class="dd-item ">
        <a href="/books/readyforprogramminginterview/">
        프로그래밍 면접 이렇게 준비한다
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/linuxias"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.linkedin.com/in/seungha-son-a97a02b3/"><i class='fab fa-linkedin'></i> Linked In</a>
              </li>
          
              <li> 
                  <a class="padding" href="mailto:linuxias@gmail.com"><i class='fas fa-envelope'></i> linuxias@gmail.com</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Developer's Delight</a> > <a href='/container/'>2. Container</a> > <a href='/container/namespace/'>Namespace</a> > 2. PID Namespace
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#the-namespace-init-process">The namespace init process</a></li>
        <li><a href="#nesting-pid-namespace">Nesting PID namespace</a></li>
        <li><a href="#proc-파일시스템과-pid-namespace">/proc 파일시스템과 PID namespace</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              2. PID Namespace
            </h1>
          

        



<p>PID namespace는 프로세스 ID 공간을 격리 시킵니다. 이 말인 즉, 다른 PID namespace의 프로세스들은 같은 PID를 가질 수도 있음을 의미합니다. PID namespace들은 프로세스 집합의 종료, 재시작과 같은 기능을 제공하기 위한 컨테이너를 허용합니다. 또한 컨테이너를 새로운 호스트로 마이그레이션하는 등의 기능을 컨테이너가 제공할 수 있도록 해줍니다.</p>
<p>PID namepsace의 특이한 점은 새로운 PID namespace의 PID는 1 부터 시작한다는 것입니다. standalone 시스템과 동일하게 각 namespace의 시작 프로세스는 pid를 1번을 가지게됩니다. PID namespace를 사용하기 위해선 <strong>CONFIG_PID_NS</strong> 커널 옵션을 설정해야 합니다.</p>
<h3 id="the-namespace-init-process">The namespace init process</h3>
<p>CLONE_NEWPID flag를 파라미터로 한 unshare(2) 시스템 콜을 호출한 이후, 또는 clone(2) 시스템 콜의 flag로 CLONE_NEWPID를 전달하여 생성한 프로세스는 새로운 Namespace의 첫 번째 프로세스가 됩니다. 이 말인 즉, 이 프로세스의 PID가 1번이라는 것입니다.</p>
<p>조금 혼란스러울 수 있습니다. 리눅스에서 PID는 고유하며, 프로세스의 식별자로 사용이 되는데, 새로운 Namespace의 첫 번째 프로세스의 PID가 1번이라면, 중복될테니까요. 그 이후 이 프로세스에 자식 프로세스들도 2,3,4&hellip; 와 같은 PID를 가질 수 있다는 말이됩니다. 식별자로써의 가치가 사라지게 되는 것일까요? 조금씩 정리해보도록 하겠습니다.</p>
<p>새로운 PID namespace의 첫 번째 프로세스의 PID가 1번이라고 말씀드렸습니다. 그 의미는 해당 namespace를 위한 init process가 된다는 의미입니다. 아래 그림처럼 새로운 namespace는 PID 1번부터 시작하게 됩니다. 뭔가 속임수 같나요?</p>
<p><img src="https://uploads.toptal.io/blog/image/674/toptal-blog-image-1416487554032.png" alt="Parent PID namespace"></p>
<p>그림 출처 : <a href="https://www.toptal.com/linux/separation-anxiety-isolating-your-system-with-linux-namespaces">https://www.toptal.com/linux/separation-anxiety-isolating-your-system-with-linux-namespaces</a></p>
<p>만약 8,1 두 개의 PID를 가진 프로세스에서 <strong>getpid(2)</strong> 시스템 콜을 호출하게 되면, 어떤 결과가 리턴 될까요? 결과는 1입니다. PID를 이용해 동작하는 시스템 콜들은 항상 호출자의 PID namespace 내에 표시되는 PID를 사용하게 됩니다. 그렇기 때문에 child PID namespace에서 표시되는 1이 반환됩니다.</p>
<p>namespace 동작 중에 init process가 종료되면 어떻게 될까요? 만약 PID namespace 내의 init process가 종료된다면, 커널은 <strong>SIGKILL</strong> 시그널을 통해 해당 namespace 내에 모든 프로세스를 종료시키게 됩니다. 이 의미는 PID namespace가 정상적으로 동작하기 위해선 PID 1의 init process가 필수적이란 의미입니다.</p>
<p>init process에 시그널을 보낼 수 있는 경우는 시그널 핸들러에 등록한 시그널들만 PID namespace의 다른 프로세스들에 의해 전달될 수 있습니다. 이러한 제한은 권한이 있는 프로세스들에게도 해당되며 실수로 init process가 PID namespace 내의 다른 멤버 프로세스에 의해 종료되는 것을 막아주게됩니다. 마찬가지로 상위 PID namespace의 프로세스는 자식 PID namespace의 init process가 등록한 시그널 **kill(2)**을 호출하여 전달할 수 있습니다. 여기서 <strong>SIGKILL</strong>과 <strong>SIGSTOP</strong>은 예외적으로 처리되는데요, 상위 PID namespace에서 시그널을 전달하면 init process에서는 처리할 수 없기에, 해당 시그널이 처리되어 프로세스 종료 및 중지가 발생하게 됩니다.</p>
<h3 id="nesting-pid-namespace">Nesting PID namespace</h3>
<p>PID Namespace는 중첩해서 사용이 가능합니다. 그 말은, 각 PID namespace는 상위(부모) namespace를 가지고 있습니다.(root PID namespace는 제외입니다 :D) PID namepsace의 부모 namespace는 <strong>clone(2)</strong> 또는 **unshare(2)**를 사용하여 namespace를 생성한 프로세스의 PID namepsace가 됩니다. 이러한 구조는 PID namespace가 트리 자료구조 형태로 이루어져 있습니다. 모든 namepsace는 자신의 상위 namespace들(root namespace 포함)을 언제든 찾을 수 있습니다.</p>
<p>특정 Namespace에 속한 프로세스는 해당 namespace에 속한 프로세스들과, 상위 모든(root namespace로 가는 경로의) namespace 프로세스들에게 보여집니다. 보여진다는 의미는 해당 프로세스를 타겟으로 작업을 진행할 수 있다는 의미입니다. 하지만 반대로 자식 PID namespace에서는 부모나 제거된 상위 namespace의 프로세스들을 볼 수 없습니다. 정리하면, 프로세스는 오직 자신의 PID namsepace의 프로세스들이나 자식 namespace들의 프로세스들만 볼 수 있습니다.</p>
<p>특정 PID namespace내의 프로세스들은 가끔 namespace 외부에 부모 프로세스를 가지는 경우가 있습니다. 첫 번째는 위에서 살펴보았듯이, Namespace가 생성된 후 첫 프로세스는 자신을 생성한 프로세스가 부모프로세스가 됩니다. 이 경우엔 부모와 자식 프로세스가 각각 다른 PID namespace에 존재하게 됩니다. 두 번째로 <strong>setns(2)</strong> 시스템콜을 이용하여 특정 PID namespace로 조인하게 되는 경우입니다. 조인할 수 있는 PID namespace는 자식 PID namespace으로만 가능합니다. 완전 다른 방향의 namespace로는 불가능합니다. 잘 생각하셔야 할게 지금 설명드리는 부분은 namespace간 부모, 자식 관계가 아닌 프로세스의 부모, 자식 관계입니다.</p>
<h3 id="proc-파일시스템과-pid-namespace">/proc 파일시스템과 PID namespace</h3>
<p>/proc 파일시스템은 /proc 파일시스템이 다른 Namespace에서 보여지더라도 마운트를 수행한 프로세스의 PID namespace에 보이는 프로세스만 보여줍니다. 새 PID namespace를 만든 후에는 ps (1)와 같은 툴이 정상적으로 작동하도록 /proc 파일시스템에 새로운 procfs 인스턴스를 마운트하고 루트 디렉토리를 변경하는 것이 좋습니다. clone (2) 또는 unshare(2)의 flags에 CLONE_NEWNS를 포함하여 새로운 마운트 네임 스페이스를 동시에 생성하면 루트 디렉토리를 변경할 필요가 없습니다. 새로운 procfs 인스턴스를 /proc에 직접 마운트 할 수 있습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mount -t proc proc /proc
</code></pre></div><p>PID namespace는 container에서 유용하게 사용되는 기술 중 하나입니다. 추가적인 내용들은 정리되는대로 갱신하겠습니다. 글 읽어주셔서 감사합니다.</p>
<p>감사합니다.</p>
<p>참조 :
<a href="https://www.toptal.com/linux/separation-anxiety-isolating-your-system-with-linux-namespaces">https://www.toptal.com/linux/separation-anxiety-isolating-your-system-with-linux-namespaces</a></p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/container/namespace/1.what_is_namespace/" title="1. Namespace"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/container/namespace/3.user_namespace/" title="3. User Namespace" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1580303065"></script>
    <script src="/js/perfect-scrollbar.min.js?1580303065"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1580303065"></script>
    <script src="/js/jquery.sticky.js?1580303065"></script>
    <script src="/js/featherlight.min.js?1580303065"></script>
    <script src="/js/highlight.pack.js?1580303065"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1580303065"></script>
    <script src="/js/learn.js?1580303065"></script>
    <script src="/js/hugo-learn.js?1580303065"></script>

    <link href="/mermaid/mermaid.css?1580303065" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1580303065"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

