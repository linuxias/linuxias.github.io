<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.78.1" />
    <meta name="description" content="">
<meta name="author" content="Seungha Son">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Resource Limitation :: Developer&#39;s Delight</title>

    
    <link href="/css/nucleus.css?1604841359" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1604841359" rel="stylesheet">
    <link href="/css/hybrid.css?1604841359" rel="stylesheet">
    <link href="/css/featherlight.min.css?1604841359" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1604841359" rel="stylesheet">
    <link href="/css/auto-complete.css?1604841359" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1604841359" rel="stylesheet">
    <link href="/css/theme.css?1604841359" rel="stylesheet">
    <link href="/css/hugo-theme.css?1604841359" rel="stylesheet">
    
    <link href="/css/theme-purple.css?1604841359" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1604841359"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/container/docker/container_resource/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://linuxias.github.io/">
  <svg id="grav-logo" style="width:100%; height:100%;" viewBox="0 0 504 140" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;">
    <path d="M235.832,71.564l-7.98,-0.001c-1.213,0.001 -2.197,0.987 -2.197,2.204l0,15.327l-0.158,0.132c-4.696,3.962 -10.634,6.14 -16.719,6.14c-14.356,0 -26.034,-11.68 -26.034,-26.037c0,-14.358 11.678,-26.035 26.034,-26.035c5.582,0 10.919,1.767 15.437,5.113c0.877,0.649 2.093,0.56 2.866,-0.211l5.69,-5.69c0.444,-0.442 0.675,-1.055 0.639,-1.681c-0.034,-0.627 -0.336,-1.206 -0.828,-1.597c-6.76,-5.363 -15.214,-8.314 -23.805,-8.314c-21.18,0 -38.414,17.233 -38.414,38.415c0,21.183 17.234,38.415 38.414,38.415c10.937,0 21.397,-4.705 28.698,-12.914c0.358,-0.403 0.556,-0.921 0.556,-1.46l0,-19.603c0,-1.217 -0.985,-2.203 -2.2,-2.203"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M502.794,34.445c-0.408,-0.616 -1.1,-0.989 -1.838,-0.989l-8.684,0c-0.879,0 -1.673,0.522 -2.022,1.329l-24.483,56.839l-24.92,-56.852c-0.352,-0.799 -1.142,-1.316 -2.012,-1.316l-8.713,0c-0.744,0 -1.44,0.373 -1.843,0.995c-0.408,0.623 -0.476,1.408 -0.174,2.09l30.186,68.858c0.352,0.799 1.143,1.317 2.017,1.317l10.992,0c0.879,0 1.673,-0.527 2.021,-1.329l29.655,-68.861c0.289,-0.68 0.222,-1.461 -0.182,-2.081"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M388.683,34.772c-0.353,-0.798 -1.142,-1.316 -2.017,-1.316l-10.988,0c-0.879,0 -1.673,0.522 -2.021,1.329l-29.655,68.861c-0.294,0.675 -0.226,1.46 0.182,2.077c0.407,0.619 1.096,0.993 1.838,0.993l8.684,0c0.879,0 1.673,-0.526 2.022,-1.329l24.478,-56.842l24.92,56.854c0.353,0.798 1.143,1.317 2.013,1.317l8.717,0c0.744,0 1.44,-0.374 1.843,-0.993c0.408,-0.624 0.471,-1.41 0.174,-2.094l-30.19,-68.857Z"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M309.196,81.525l0.476,-0.229c8.675,-4.191 14.279,-13.087 14.279,-22.667c0,-13.881 -11.295,-25.174 -25.176,-25.174l-31.863,0c-1.214,0 -2.199,0.988 -2.199,2.202l0,68.855c0,1.219 0.985,2.204 2.199,2.204l7.979,0c1.214,0 2.2,-0.985 2.2,-2.204l0,-58.679l21.684,0c7.059,0 12.799,5.739 12.799,12.796c0,5.885 -3.996,10.989 -9.728,12.408c-1.032,0.261 -2.064,0.393 -3.071,0.393l-7.977,0c-0.829,0 -1.585,0.467 -1.959,1.205c-0.378,0.74 -0.305,1.625 0.187,2.296l22.62,30.884c0.412,0.566 1.07,0.901 1.771,0.901l9.915,0c0.827,0 1.587,-0.467 1.96,-1.207c0.378,-0.742 0.302,-1.629 -0.186,-2.296l-15.91,-21.688Z"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M107.191,80.969c-7.255,-4.794 -11.4,-8.845 -15.011,-16.109c-2.47,4.977 -8.236,12.376 -17.962,18.198c-4.856,15.106 -27.954,44.015 -35.43,39.916c-2.213,-1.212 -2.633,-2.808 -2.133,-4.456c0.536,-4.129 9.078,-13.62 9.078,-13.62c0,0 0.18,1.992 2.913,6.187c-3.609,-11.205 5.965,-25.031 8.5,-29.738c3.985,-1.269 4.274,-6.387 4.274,-6.387c0.255,-7.909 -3.278,-13.635 -6.701,-17.059c2.459,3.002 3.255,7.539 3.372,11.694l0,0.023c0.012,0.469 0.012,0.93 0.011,1.39c-0.117,3.439 -1.157,8.19 -3.383,8.19l0.006,0.03c-2.289,-0.098 -5.115,0.391 -7.639,1.18l-5.582,1.334c0,0 2.977,-0.136 4.584,1.252c-1.79,2.915 -5.769,6.533 -10.206,8.588c-6.457,2.995 -8.312,-2.964 -5.034,-6.838c0.805,-0.946 1.618,-1.745 2.387,-2.399c-0.495,-0.513 -0.807,-1.198 -0.889,-2.068c-0.001,-0.005 -0.004,-0.009 -0.005,-0.013c-0.45,-1.977 -0.202,-4.543 2.596,-8.623c0.551,-0.863 1.214,-1.748 2.007,-2.647c0.025,-0.031 0.046,-0.059 0.072,-0.089c0.034,-0.042 0.072,-0.08 0.108,-0.121c0.02,-0.023 0.039,-0.045 0.059,-0.068c0.2,-0.228 0.413,-0.45 0.639,-0.663c3.334,-3.414 8.599,-6.966 16.897,-10.152c9.675,-14.223 13.219,-16.89 13.219,-16.89c1.071,-1.096 2.943,-2.458 3.632,-2.805c-5.053,-8.781 -6.074,-21.158 -4.75,-24.493c-0.107,0.18 -0.206,0.365 -0.287,0.556c0.49,-1.143 0.819,-1.509 1.328,-2.111c1.381,-1.632 6.058,-2.488 7.737,0.971c0.895,1.844 1.063,4.232 1.034,6.023c-3.704,-0.193 -7.063,4.036 -7.063,4.036c0,0 3.067,-1.448 6.879,-1.473c0,0 1.015,0.883 2.283,2.542c-1.712,3.213 -4.524,10.021 -2.488,17.168c0.338,1.408 0.849,2.619 1.483,3.648c0.024,0.045 0.044,0.089 0.069,0.135c0.051,0.066 0.096,0.122 0.144,0.183c3.368,5.072 9.542,5.665 9.542,5.665c-2.906,-1.45 -5.274,-3.76 -6.816,-6.56c-0.8,-1.498 -1.291,-2.762 -1.592,-3.761c-1.636,-6.313 0.771,-9.999 2.149,-12.471c3.17,-4.917 8.944,-7.893 15.151,-7.185c8.712,0.995 14.968,8.862 13.973,17.571c-0.608,5.321 -3.781,9.723 -8.142,12.117c1.049,2.839 -0.073,6.28 -0.073,6.28c2.642,3.323 2.758,5.238 2.667,7.017c-3.357,-0.565 -6.618,1.701 -6.618,1.701c0,0 6.476,-1.546 10.238,1.81c2.446,2.631 4.078,5.009 5.051,6.766c1.393,2.505 7.859,2.683 7.123,7.188c-0.737,4.499 -5.669,4.542 -13.401,-0.56M69.571,0c-38.424,0 -69.571,31.148 -69.571,69.567c0,38.422 31.147,69.573 69.571,69.573c38.42,0 69.568,-31.151 69.568,-69.573c0,-38.42 -31.148,-69.567 -69.568,-69.567"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M73.796,51.693c0.813,-0.814 0.813,-2.134 0,-2.947c-0.815,-0.814 -2.133,-0.814 -2.947,0c-0.815,0.813 -0.815,2.133 0,2.947c0.814,0.813 2.132,0.813 2.947,0" style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M66.445,53.149c-0.814,0.813 -0.814,2.133 0,2.947c0.813,0.814 2.133,0.814 2.947,0c0.813,-0.814 0.813,-2.134 0,-2.947c-0.814,-0.813 -2.134,-0.813 -2.947,0" style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M79.231,54.233c-1.274,-1.274 -3.339,-1.272 -4.611,0l-2.713,2.712c-1.274,1.275 -1.274,3.339 0,4.612l2.978,2.978c1.274,1.275 3.338,1.274 4.611,0l2.712,-2.712c1.274,-1.274 1.274,-3.339 0,-4.612l-2.977,-2.978Z" style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M95.759,41.445c-2.151,-2.578 1.869,-7.257 4.391,-4.463c4.645,5.148 -2.237,7.041 -4.391,4.463M105.004,44.132c3.442,-6.553 -1.427,-10.381 -4.773,-13.523c-5.36,-5.039 -10.706,-7.217 -16.811,-0.241c-6.102,6.977 -2.226,15.068 3.356,19.061c5.584,3.994 14.782,1.255 18.228,-5.297"
      style="fill:#000;fill-rule:nonzero;"></path>
  </svg>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1604841359"></script>
<script type="text/javascript" src="/js/auto-complete.js?1604841359"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/linuxias.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1604841359"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/linux/" title="1. Linux" class="dd-item 
        
        
        
        ">
      <a href="/linux/">
          1. Linux
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/linux/debugging/" title="Debugging" class="dd-item 
        
        
        
        ">
      <a href="/linux/debugging/">
          Debugging
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/linux/debugging/ftrace/" title="ftrace" class="dd-item ">
        <a href="/linux/debugging/ftrace/">
        ftrace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/linux/debugging/proc_filesystem/" title="Proc Filesystem" class="dd-item ">
        <a href="/linux/debugging/proc_filesystem/">
        Proc Filesystem
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/linux/profile/" title="Profile" class="dd-item 
        
        
        
        ">
      <a href="/linux/profile/">
          Profile
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/linux/profile/cpu/" title="CPU Profiling" class="dd-item ">
        <a href="/linux/profile/cpu/">
        CPU Profiling
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/linux/profile/filesystem/" title="FileSystem" class="dd-item ">
        <a href="/linux/profile/filesystem/">
        FileSystem
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/linux/profile/lttng/" title="LTTng:userspace" class="dd-item ">
        <a href="/linux/profile/lttng/">
        LTTng:userspace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/linux/profile/memory/" title="Memory profiling" class="dd-item ">
        <a href="/linux/profile/memory/">
        Memory profiling
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/linux/profile/performance_methodologies/" title="Performance Methodologies " class="dd-item ">
        <a href="/linux/profile/performance_methodologies/">
        Performance Methodologies 
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/linux/profile/process/" title="Process" class="dd-item ">
        <a href="/linux/profile/process/">
        Process
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/linux/tip/" title="Tips" class="dd-item 
        
        
        
        ">
      <a href="/linux/tip/">
          Tips
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/linux/tip/multitail/" title="[multitail] 여러 로그 동시에 확인하기" class="dd-item ">
        <a href="/linux/tip/multitail/">
        [multitail] 여러 로그 동시에 확인하기
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/linux/tip/kernel-config/" title="시스템에서 kernel config 확인하기" class="dd-item ">
        <a href="/linux/tip/kernel-config/">
        시스템에서 kernel config 확인하기
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/linux/compilelink/" title="Compile&amp;Link" class="dd-item 
        
        
        
        ">
      <a href="/linux/compilelink/">
          Compile&amp;Link
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/linux/compilelink/gcc_warning_option/" title="[gcc] Warning 옵션" class="dd-item ">
        <a href="/linux/compilelink/gcc_warning_option/">
        [gcc] Warning 옵션
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/linux/compilelink/gcc_specific_attribute/" title="[gcc] 최적화 속성 사용하기" class="dd-item ">
        <a href="/linux/compilelink/gcc_specific_attribute/">
        [gcc] 최적화 속성 사용하기
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/linux/compilelink/staticliblink/" title="정적 라이브러리 링크" class="dd-item ">
        <a href="/linux/compilelink/staticliblink/">
        정적 라이브러리 링크
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/linux/theory/glibc_heap/" title="[glibc] malloc, free mechanism" class="dd-item ">
        <a href="/linux/theory/glibc_heap/">
        [glibc] malloc, free mechanism
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/container/" title="2. Container" class="dd-item 
        parent
        
        
        ">
      <a href="/container/">
          2. Container
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/container/cgroup/" title="Cgroup" class="dd-item 
        
        
        
        ">
      <a href="/container/cgroup/">
          Cgroup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/container/cgroup/1.cgroup/" title="1. Cgroup" class="dd-item ">
        <a href="/container/cgroup/1.cgroup/">
        1. Cgroup
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/cgroup/2.cgroup_blkio/" title="2. blkio" class="dd-item ">
        <a href="/container/cgroup/2.cgroup_blkio/">
        2. blkio
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/cgroup/3.cgroup_memory/" title="3. memory" class="dd-item ">
        <a href="/container/cgroup/3.cgroup_memory/">
        3. memory
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/cgroup/4.cpu.cpuset.cpuacct/" title="4. cpu, cpuset, cpuaccet" class="dd-item ">
        <a href="/container/cgroup/4.cpu.cpuset.cpuacct/">
        4. cpu, cpuset, cpuaccet
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/container/namespace/" title="Namespace" class="dd-item 
        
        
        
        ">
      <a href="/container/namespace/">
          Namespace
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/container/namespace/1.what_is_namespace/" title="1. Namespace" class="dd-item ">
        <a href="/container/namespace/1.what_is_namespace/">
        1. Namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/namespace/2_pid_namespace/" title="2. PID Namespace" class="dd-item ">
        <a href="/container/namespace/2_pid_namespace/">
        2. PID Namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/namespace/3.user_namespace/" title="3. User Namespace" class="dd-item ">
        <a href="/container/namespace/3.user_namespace/">
        3. User Namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/namespace/4.qemu/" title="4. QEMU" class="dd-item ">
        <a href="/container/namespace/4.qemu/">
        4. QEMU
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/namespace/5_mount_namespace/" title="5. Mount namespace" class="dd-item ">
        <a href="/container/namespace/5_mount_namespace/">
        5. Mount namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/namespace/6.uts_namespace/" title="6. UTS namespace" class="dd-item ">
        <a href="/container/namespace/6.uts_namespace/">
        6. UTS namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/namespace/7.cgroup_namespace/" title="7. Cgroup Namespace" class="dd-item ">
        <a href="/container/namespace/7.cgroup_namespace/">
        7. Cgroup Namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/container/docker/" title="Docker" class="dd-item 
        parent
        
        
        ">
      <a href="/container/docker/">
          Docker
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/container/docker/1_docker_cmd_basic/" title="Docker Basic" class="dd-item ">
        <a href="/container/docker/1_docker_cmd_basic/">
        Docker Basic
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/docker/2_docker_storage/" title="Storage" class="dd-item ">
        <a href="/container/docker/2_docker_storage/">
        Storage
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/docker/compose/" title="Docker Compose" class="dd-item ">
        <a href="/container/docker/compose/">
        Docker Compose
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/docker/dockerfile/" title="Dockerfile" class="dd-item ">
        <a href="/container/docker/dockerfile/">
        Dockerfile
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/docker/container_logging/" title="Logging" class="dd-item ">
        <a href="/container/docker/container_logging/">
        Logging
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/container/docker/container_resource/" title="Resource Limitation" class="dd-item active">
        <a href="/container/docker/container_resource/">
        Resource Limitation
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/sw_architecture/" title="3. S/W Architecture" class="dd-item 
        
        
        
        ">
      <a href="/sw_architecture/">
          3. S/W Architecture
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/sw_architecture/batch_sequential_architecture/" title="Batch Sequential Architecture" class="dd-item ">
        <a href="/sw_architecture/batch_sequential_architecture/">
        Batch Sequential Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/sw_architecture/data_flow_sw_architecture/" title="Data Flow Software Architecture" class="dd-item ">
        <a href="/sw_architecture/data_flow_sw_architecture/">
        Data Flow Software Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/sw_architecture/hierarchical_software_architecture/" title="Hierarchical Software Architecture" class="dd-item ">
        <a href="/sw_architecture/hierarchical_software_architecture/">
        Hierarchical Software Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/sw_architecture/pipe_and_filter_architecture/" title="Pipe and Filter Architecture" class="dd-item ">
        <a href="/sw_architecture/pipe_and_filter_architecture/">
        Pipe and Filter Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/sw_architecture/process_control_architecture/" title="Process Control Architecture" class="dd-item ">
        <a href="/sw_architecture/process_control_architecture/">
        Process Control Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/sw_architecture/sw_design_corruption/" title="소프트웨어 설계의 부패" class="dd-item ">
        <a href="/sw_architecture/sw_design_corruption/">
        소프트웨어 설계의 부패
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/cloud/" title="Cloud" class="dd-item 
        
        
        
        ">
      <a href="/cloud/">
          Cloud
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/cloud/kubernetes_install/" title="kubeadm으로 kubernetes 설치 및 초기화" class="dd-item ">
        <a href="/cloud/kubernetes_install/">
        kubeadm으로 kubernetes 설치 및 초기화
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/machinelearning/" title="4. Machine Learning" class="dd-item 
        
        
        
        ">
      <a href="/machinelearning/">
          4. Machine Learning
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/machinelearning/basic/" title="Basic Theory" class="dd-item 
        
        
        
        ">
      <a href="/machinelearning/basic/">
          Basic Theory
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/machinelearning/basic/model_representation_and_cost_function/" title="1. Model Representation / Cost function" class="dd-item ">
        <a href="/machinelearning/basic/model_representation_and_cost_function/">
        1. Model Representation / Cost function
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/machinelearning/agent/" title="Software Agent" class="dd-item 
        
        
        
        ">
      <a href="/machinelearning/agent/">
          Software Agent
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/machinelearning/agent/bdi_architect/" title="[Agent] BDI Architecture" class="dd-item ">
        <a href="/machinelearning/agent/bdi_architect/">
        [Agent] BDI Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/machinelearning/agent/agent_communication/" title="[Agent] Communication" class="dd-item ">
        <a href="/machinelearning/agent/agent_communication/">
        [Agent] Communication
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/machinelearning/agent/agent_mas/" title="[Agent] MAS (Multi-agent System)" class="dd-item ">
        <a href="/machinelearning/agent/agent_mas/">
        [Agent] MAS (Multi-agent System)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/machinelearning/agent/agent_sw_agent_architecture/" title="[Agent] SW Agent Architecture" class="dd-item ">
        <a href="/machinelearning/agent/agent_sw_agent_architecture/">
        [Agent] SW Agent Architecture
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/books/" title="Books" class="dd-item 
        
        
        
        ">
      <a href="/books/">
          Books
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/books/readyforprogramminginterview/" title="프로그래밍 면접 이렇게 준비한다" class="dd-item ">
        <a href="/books/readyforprogramminginterview/">
        프로그래밍 면접 이렇게 준비한다
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/books/bpf_linux/" title="BPF 리눅스 관측 가능성 향상하기" class="dd-item ">
        <a href="/books/bpf_linux/">
        BPF 리눅스 관측 가능성 향상하기
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/books/headfirst_go/" title="Head First GO" class="dd-item ">
        <a href="/books/headfirst_go/">
        Head First GO
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/books/cloudnativedevopswithkubernetes/" title="쿠버네티스를 활용한 클라우드 네이티브 데브옵스" class="dd-item ">
        <a href="/books/cloudnativedevopswithkubernetes/">
        쿠버네티스를 활용한 클라우드 네이티브 데브옵스
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/linuxias"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.linkedin.com/in/seungha-son-a97a02b3/"><i class='fab fa-linkedin'></i> Linked In</a>
              </li>
          
              <li> 
                  <a class="padding" href="mailto:linuxias@gmail.com"><i class='fas fa-envelope'></i> linuxias@gmail.com</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="linuxias.github.ioContainer/Docker/Container_Resource.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Developer's Delight</a> > <a href='/container/'>2. Container</a> > <a href='/container/docker/'>Docker</a> > Resource Limitation
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#memory">Memory</a></li>
        <li><a href="#cpu">CPU</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Resource Limitation
            </h1>
          

        


<p>컨테이너는 기본적으로 리소스 제한이 없으며 호스트의 커널 스케쥴러에 의해 허용되는 주어진 리소스를 사용할 수 있습니다. 가끔 각 컨테이너 별로 리소스(CPU, Memory 등)를 제한할 필요가 생길 수 있습니다. 이런 경우를 위해 도커에서는 컨테이너 별로 어느 정도의 CPU, Memory 자원을 사용할 지에 대해 제한할 수 있는 방법을 제공하고 있습니다.</p>
<p>이 기능들이 지원되기 위해서는 커널이 필요로 합니다. 커널에서 지원하는 여부는 <code>docker run</code> 명령어를 사용하여 확인할 수 있습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo docker info
<span style="color:#f92672">[</span>sudo<span style="color:#f92672">]</span> password <span style="color:#66d9ef">for</span> linuxias: 
Client:
Debug Mode: false

Server:
Containers: <span style="color:#ae81ff">1</span>
Running: <span style="color:#ae81ff">1</span>
Paused: <span style="color:#ae81ff">0</span>
Stopped: <span style="color:#ae81ff">0</span>
Images: <span style="color:#ae81ff">5</span>
Server Version: 19.03.5
Storage Driver: overlay2
Backing Filesystem: extfs
Supports d_type: true
Native Overlay Diff: true
Logging Driver: json-file
Cgroup Driver: cgroupfs
Plugins:
Volume: local
Network: bridge host ipvlan macvlan null overlay
Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
Swarm: inactive
Runtimes: runc
Default Runtime: runc
Init Binary: docker-init
containerd version: b34a5c8af56e510852c35414db4c1f4fa6172339
runc version: 3e425f80a8c931f88e6d94a8c831b9d5aa481657
init version: fec3683
Security Options:
apparmor
seccomp
Profile: default
Kernel Version: 4.15.0-76-generic
Operating System: Ubuntu 16.04.6 LTS
OSType: linux
Architecture: x86_64
CPUs: <span style="color:#ae81ff">8</span>
Total Memory: 31.36GiB
Name: desktop
ID: EKUS:7MJY:7SHK:ORWK:BHEB:3LDT:DLYP:BC66:T6B5:Z7PN:H22E:LNBL
Docker Root Dir: /var/lib/docker
Debug Mode: false
Registry: https://index.docker.io/v1/
Labels:
Experimental: false
Insecure Registries:
127.0.0.0/8
Live Restore Enabled: false

WARNING: No swap limit support

</code></pre></div><p><code>docker run</code> 명령어로 확인 시 가장 아래 <strong>WARNING: No swap limit support</strong> 라는 경고가 발생한다면 아래와 같이 조치하시면 됩니다. 아래 내용은 Docker docs에서 참조한 내용입니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vim" data-lang="vim"><span style="color:#a6e22e">WARNING</span>: <span style="color:#a6e22e">Your</span> <span style="color:#a6e22e">kernel</span> <span style="color:#a6e22e">does</span> <span style="color:#a6e22e">not</span> <span style="color:#a6e22e">support</span> <span style="color:#a6e22e">swap</span> <span style="color:#a6e22e">limit</span> <span style="color:#a6e22e">capabilities</span>. <span style="color:#a6e22e">Limitation</span> <span style="color:#a6e22e">discarded</span>.<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">This</span> <span style="color:#a6e22e">warning</span> <span style="color:#a6e22e">does</span> <span style="color:#a6e22e">not</span> <span style="color:#a6e22e">occur</span> <span style="color:#a6e22e">on</span> <span style="color:#a6e22e">RPM</span>-<span style="color:#a6e22e">based</span> <span style="color:#a6e22e">systems</span>, <span style="color:#a6e22e">which</span> <span style="color:#a6e22e">enable</span> <span style="color:#a6e22e">these</span> <span style="color:#a6e22e">capabilities</span> <span style="color:#a6e22e">by</span> <span style="color:#a6e22e">default</span>.<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">If</span> <span style="color:#a6e22e">you</span> <span style="color:#a6e22e">don</span>’<span style="color:#a6e22e">t</span> <span style="color:#a6e22e">need</span> <span style="color:#a6e22e">these</span> <span style="color:#a6e22e">capabilities</span>, <span style="color:#a6e22e">you</span> <span style="color:#a6e22e">can</span> <span style="color:#a6e22e">ignore</span> <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">warning</span>. <span style="color:#a6e22e">You</span> <span style="color:#a6e22e">can</span> <span style="color:#a6e22e">enable</span> <span style="color:#a6e22e">these</span> <span style="color:#a6e22e">capabilities</span> <span style="color:#a6e22e">on</span> <span style="color:#a6e22e">Ubuntu</span> <span style="color:#a6e22e">or</span> <span style="color:#a6e22e">Debian</span> <span style="color:#a6e22e">by</span> <span style="color:#a6e22e">following</span> <span style="color:#a6e22e">these</span> <span style="color:#a6e22e">instructions</span>. <span style="color:#a6e22e">Memory</span> <span style="color:#a6e22e">and</span> <span style="color:#a6e22e">swap</span> <span style="color:#a6e22e">accounting</span> <span style="color:#a6e22e">incur</span> <span style="color:#a6e22e">an</span> <span style="color:#a6e22e">overhead</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">about</span> <span style="color:#ae81ff">1</span>% <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">total</span> <span style="color:#a6e22e">available</span> <span style="color:#a6e22e">memory</span> <span style="color:#a6e22e">and</span> <span style="color:#a6e22e">a</span> <span style="color:#ae81ff">10</span>% <span style="color:#a6e22e">overall</span> <span style="color:#a6e22e">performance</span> <span style="color:#a6e22e">degradation</span>, <span style="color:#a6e22e">even</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">Docker</span> <span style="color:#a6e22e">is</span> <span style="color:#a6e22e">not</span> <span style="color:#a6e22e">running</span>.<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Log</span> <span style="color:#a6e22e">into</span> <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">Ubuntu</span> <span style="color:#a6e22e">or</span> <span style="color:#a6e22e">Debian</span> <span style="color:#a6e22e">host</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">a</span> <span style="color:#a6e22e">user</span> <span style="color:#a6e22e">with</span> <span style="color:#a6e22e">sudo</span> <span style="color:#a6e22e">privileges</span>.<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Edit</span> <span style="color:#a6e22e">the</span> <span style="color:#e6db74">/etc/</span><span style="color:#a6e22e">default</span>/<span style="color:#a6e22e">grub</span> <span style="color:#a6e22e">file</span>. <span style="color:#a6e22e">Add</span> <span style="color:#a6e22e">or</span> <span style="color:#a6e22e">edit</span> <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">GRUB_CMDLINE_LINUX</span> <span style="color:#a6e22e">line</span> <span style="color:#a6e22e">to</span> <span style="color:#a6e22e">add</span> <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">following</span> <span style="color:#a6e22e">two</span> <span style="color:#a6e22e">key</span>-<span style="color:#a6e22e">value</span> <span style="color:#a6e22e">pairs</span>:<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">GRUB_CMDLINE_LINUX</span>=<span style="color:#e6db74">&#34;cgroup_enable=memory swapaccount=1&#34;</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Save</span> <span style="color:#a6e22e">and</span> <span style="color:#a6e22e">close</span> <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">file</span>.<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Update</span> <span style="color:#a6e22e">GRUB</span>.<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>$ <span style="color:#a6e22e">sudo</span> <span style="color:#a6e22e">update</span>-<span style="color:#a6e22e">grub</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">If</span> <span style="color:#a6e22e">your</span> <span style="color:#a6e22e">GRUB</span> <span style="color:#a6e22e">configuration</span> <span style="color:#a6e22e">file</span> <span style="color:#a6e22e">has</span> <span style="color:#a6e22e">incorrect</span> <span style="color:#a6e22e">syntax</span>, <span style="color:#a6e22e">an</span> <span style="color:#a6e22e">error</span> <span style="color:#a6e22e">occurs</span>. <span style="color:#a6e22e">In</span> <span style="color:#a6e22e">this</span> <span style="color:#a6e22e">case</span>, <span style="color:#a6e22e">repeat</span> <span style="color:#a6e22e">steps</span> <span style="color:#ae81ff">2</span> <span style="color:#a6e22e">and</span> <span style="color:#ae81ff">3</span>.<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">The</span> <span style="color:#a6e22e">changes</span> <span style="color:#a6e22e">take</span> <span style="color:#a6e22e">effect</span> <span style="color:#a6e22e">when</span> <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">system</span> <span style="color:#a6e22e">is</span> <span style="color:#a6e22e">rebooted</span>.<span style="color:#960050;background-color:#1e0010">
</span></code></pre></div><h3 id="memory">Memory</h3>
<h4 id="memory-부족의-위험성">Memory 부족의 위험성..?</h4>
<p>실행 중인 컨테이너가 호스트 시스템의 메모리를 과다하게 사용하는 것은 매우 위험합니다. 컨테이너를 동작 시에 호스트 시스템의 메모리를 너무 많이 사용하지 않도록 주의해 주세요. 리눅스 호스트에서 커널이 시스템을 원활하게 동작시키기 위한 과정 중에 메모리가 부족하다는 것을 감지하면 OOME 또는 OOM 이 발생하고 프로세스를 강제 종료하게 됩니다. 즉 도커 컨테이너를 위함 여러 중요 프로세스들이 종료될 수 있습니다. 원치 않는 종료는 시스템에 큰 영향을 주고 시스템이 종료될 수 도 있으니 주의해주세요!</p>
<p>과다한 메모리 사용으로 인해 도커 데몬이 커널에 의해 종료되는 위험을 최소화 하기 위한 방안이 있습니다. OOM 우선순위를 변경하여 커널에 의해 종료되는 여러 프로세스 들 중 우선순위를 낮추는 것 입니다. 위 방법은 cgroup memory 자원에 대한 제어 방법에서도 말씀 드린 적이 있습니다. cgroup으로 memory 자원 추상화된 프로세스에 대해 OOM을 disable 함으로서 종료됨을 막고 메모리가 필요하다면 사용할 수 있는 메모리가 생길 때 까지 대기하고 있는 것입니다. 도커 데몬도 위와 같은 방법을 제한합니다. 도커 데몬이 아닌 컨테이너는 OOM 우선 순위가 조정되지 않습니다. 따라서 Docker 데몬이나 다른 시스템 프로세스가 종료되는 것보다 개별 컨테이너가 종료 될 가능성이 높아집니다. 데몬이나 컨테이너에서 수동으로 <code>--oom-score-adj</code>를 최소값으로 설정하거나 컨테이너에서 <code>--oom-kill-disable</code>을 설정하여 이러한 안전 장치를 피하려고 시도해서는 안됩니다. 이 점 꼭 유의해주세요.</p>
<p>nginx 이미지를 이용하여 메모리가 1GB로 제한되어 있는 컨테이너를 생성해봅시다. 제한된 메모리 설정은 <code>docker inspect</code> 명령어를 사용하여 확인하였습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$sudo docker run -d --memory<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1g&#34;</span> nginx
WARNING: Your kernel does not support swap limit capabilities or the cgroup is not mounted. Memory limited without swap.
5019001493a593b4c7082362a1af05ee754d7c142705ecbb9a5e1306b82abb2d

$sudo docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
5019001493a5        nginx               <span style="color:#e6db74">&#34;nginx -g &#39;daemon of…&#34;</span>   <span style="color:#ae81ff">23</span> seconds ago      Up <span style="color:#ae81ff">22</span> seconds       80/tcp              beautiful_chandrasekhar


$sudo docker inspect beautiful_chandrasekhar | grep Memory
<span style="color:#e6db74">&#34;Memory&#34;</span>: 1073741824,
<span style="color:#e6db74">&#34;KernelMemory&#34;</span>: 0,
<span style="color:#e6db74">&#34;KernelMemoryTCP&#34;</span>: 0,
<span style="color:#e6db74">&#34;MemoryReservation&#34;</span>: 0,
<span style="color:#e6db74">&#34;MemorySwap&#34;</span>: -1,
<span style="color:#e6db74">&#34;MemorySwappiness&#34;</span>: null,
</code></pre></div><p>만약 nginx 컨테이너 내부에서 할당된 1GB의 메모리 이상의 메모리를 사용하게 되면 컨테이너는 자동으로 종료됩니다. 그렇기에 각 컨테이너에 메모리를 할당할 시 적절량을 잘 생각하셔서 할당해 주셔야 합니다. <code>--memory</code> 옵션 외의 메모리와 관련된 옵션을 정리하면 아래와 같습니다.</p>
<table>
<thead>
<tr>
<th>option</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--memory-swap</code></td>
<td>디스크로 swap 할 수 있는 메모리 설정</td>
</tr>
<tr>
<td><code>--memory-swappiness</code></td>
<td>기본적으로 호스트 커널은 컨테이너가 사용하는 익명 페이지의 비율을 바꿀 수 있습니다. &ndash;memory-swappiness를 0에서 100 사이의 값으로 설정하여이 백분율을 조정할 수 있습니다.</td>
</tr>
<tr>
<td><code>--memory-reservation</code></td>
<td>호스트 시스템에서 경합 또는 메모리 부족을 감지하면 활성화되는 &ndash;memory보다 작은 소프트 제한을 지정할 수 있습니다. &ndash;memory-reservation을 사용하는 경우 우선 순위를 지정하려면 &ndash;memory보다 낮게 설정해야합니다. 소프트 한계이므로 컨테이너가 한계를 초과하지는 않습니다.</td>
</tr>
<tr>
<td><code>--kernel-memory</code></td>
<td>컨테이너가 사용할 수 있는 커널 메모리의 최대 값입니다. 허용되는 최소값은 4m입니다. 커널 메모리는 스왑아웃 할 수 없기 때문에 커널 메모리가 부족한 컨테이너는 호스트 시스템 리소스를 차단될 수 있으며 이로 인해 호스트 시스템과 다른 컨테이너에 부작용이 발생할 수 있습니다.</td>
</tr>
<tr>
<td>&ndash;oom-kill-disable</td>
<td>기본적으로 메모리 부족 (OOM) 오류가 발생하면 커널은 컨테이너의 프로세스를 종료합니다. 이 동작을 변경하려면 &ndash;oom-kill-disable 옵션을 사용하십시오. -m /-memory 옵션도 설정 한 컨테이너에서는 OOM 킬러 만 비활성화하십시오. -m 플래그를 설정하지 않으면 호스트에 메모리가 부족할 수 있으며 커널은 메모리를 비우기 위해 호스트 시스템의 프로세스를 종료해야합니다.</td>
</tr>
</tbody>
</table>
<h3 id="cpu">CPU</h3>
<p>기본적으로 호스트 시스템에서 동작하는 컨테이너들은 시스템의 CPU 사용량에 제한이 없습니다. 하지만 CPU 사용량을 제한할 수 있는 방법이 있습니다. 대부분 사용자들은 CFS 스케쥴러를 기본으로 사용하고 있지만, Docker 1.13 버전 이상에서는 real-time 스케쥴러로 변경이 가능합니다. 먼저 CFS 스케쥴러에 대한 설정부터 정리해보겠습니다.</p>
<h4 id="cpu---cfs-스케쥴러">CPU - CFS 스케쥴러</h4>
<p>CFS 스케쥴러는 리눅스 커널 CPU 스케쥴러입니다. 스케쥴러에 대한 자세한 설명은 생략하겠습니다.</p>
<h4 id="1---cpus">1. &ndash;cpus</h4>
<p>컨테이너가 사용할 수 있는 CPU 리소스 양을 지정합니다. 만약 cpu가 8개 있는 호스트 시스템에서 <code>--cpus=0.5</code>로 지정하면 컨테이너는 최대 4개의 CPU 사용을 보장 받을 수 있습니다.</p>
<h4 id="2---cpu-shares">2. &ndash;cpu-shares</h4>
<p><code>cpu-shares</code> 옵션은 컨테이너에 가중치를 설정해 해당 컨테이너가 CPU를 상대적으로 얼마나 사용할 수 있는지를 설정할 수 있습니다. 기본적으로 1024가 기본 값으로 설정되어 있습니다. 컨테이너 간 사용하는 상대 비율로써 하나의 컨테이너가 1024, 다른 하나가 2048로 설정되어 있다면, 1:2 의 비율로 CPU 자원을 공유하게 됩니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo docker run -it --cpu-shares <span style="color:#ae81ff">1024</span> ubuntu:18.04
</code></pre></div><h4 id="3---cpuset-cpu">3. &ndash;cpuset-cpu</h4>
<p>여러 CPU를 자유롭게 컨테이너들이 사용할 수 있도록 할수도 있지만, 특정 CPU만 사용할 수도 있게 할 수 있습니다. 아래 이미지는 문영일님의 블로그인 문c블로그에서 참조하였습니다. 이미지를 보시면 쉽게 이해가 되실 겁니다.
<img src="http://jake.dothome.co.kr/wp-content/uploads/2015/12/cgroup2.png" alt="문 c 블로그 cgroup 설명"></p>
<p>위 방식의 이점은 명확합니다. 코어 스위칭 비용을 없앰으로서 cache miss로 인한 성능저하 등의 문제를 최소화 할 수 있습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo docker run -it --cpuset-cpus<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> --name cpu_test ubuntu:18.04
root@452468a96c63:/# apt update <span style="color:#f92672">&amp;&amp;</span> apt install stress
root@452468a96c63:/# stress --cpu <span style="color:#ae81ff">1</span>
....

다음 호스트 시스템에서 <span style="color:#e6db74">`</span>htop<span style="color:#e6db74">`</span>을 이용하여 확인해봅시다.
<span style="color:#e6db74">```</span>bash
$htop
<span style="color:#ae81ff">1</span>  <span style="color:#f92672">[</span>|                                                                                     0.7%<span style="color:#f92672">]</span>   <span style="color:#ae81ff">5</span>  <span style="color:#f92672">[</span>                                                                                      0.0%<span style="color:#f92672">]</span>
<span style="color:#ae81ff">2</span>  <span style="color:#f92672">[</span>                                                                                      0.0%<span style="color:#f92672">]</span>   <span style="color:#ae81ff">6</span>  <span style="color:#f92672">[</span>                                                                                      0.0%<span style="color:#f92672">]</span>
<span style="color:#ae81ff">3</span>  <span style="color:#f92672">[||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||</span>100.0%<span style="color:#f92672">]</span>   <span style="color:#ae81ff">7</span>  <span style="color:#f92672">[</span>                                                                                      0.0%<span style="color:#f92672">]</span>
<span style="color:#ae81ff">4</span>  <span style="color:#f92672">[</span>                                                                                      0.0%<span style="color:#f92672">]</span>   <span style="color:#ae81ff">8</span>  <span style="color:#f92672">[||</span>                                                                                    1.3%<span style="color:#f92672">]</span>
Mem<span style="color:#f92672">[||||||||||||||||||||||||||</span>                                                     4.33G/31.4G<span style="color:#f92672">]</span>   Tasks: 182, <span style="color:#ae81ff">656</span> thr; <span style="color:#ae81ff">2</span> running
Swp<span style="color:#f92672">[</span>|                                                                              2.00M/31.9G<span style="color:#f92672">]</span>   Load average: 1.04 0.88 0.47 
Uptime: <span style="color:#ae81ff">1</span> day, 19:25:52
</code></pre></div><p>CPU 3번(1번부터 0입니다.) 이 100%로 표기되어 있습니다. &ndash;cpuset-cpus=2 옵션으로 인해 ubuntu:18.04 이미지로 생성한 컨테이너에서 stress 테스트 진행하였으니, 3번이 100%임을 확인할 수 있습니다.</p>
<h4 id="4---cpu-period---cpu-quota">4. &ndash;cpu-period, &ndash;cpu-quota</h4>
<p>컨테이너의 CFS 주기는 기본적으로 100ms로 설정되어 있습니다. 위 명령어를 사용하여 변경이 가능합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$sudo docker run -it --cpu-period<span style="color:#f92672">=</span><span style="color:#ae81ff">100000</span> --cpu-quota<span style="color:#f92672">=</span><span style="color:#ae81ff">25000</span> --name cpu_test ubuntu:18.04
<span style="color:#75715e">#apt update &amp;&amp; apt install stress</span>
<span style="color:#75715e">#stress --cpu 1</span>
</code></pre></div><p>위와 같이 컨테이너를 생성하고 stress를 설치하여 실행해 봅시다.
&ndash;cpu-period 100000은 100ms를 의미합니다. &ndash;cpu-quota는 &ndash;cpu-period로 설정된 시간 중 CPU 스케쥴링에 얼마나 할당할 지 설정해 줍니다. 컨테이너가 스로틀링되기 전에 제한되는 마이크로 초 수입니다. 이 기능은 효과적인 한도 역할을합니다. Docker 1.13 이상을 사용하는 경우 앞서 설명한 &ndash;cpus를 대신 사용하는 것을 추천드립니다.</p>
<p>Docker docs에는 아래와 같이 추천하고 있습니다.</p>
<h5 id="docker-113-and-higher">Docker 1.13 and higher:</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run -it --cpus<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;.5&#34;</span> ubuntu /bin/bash
</code></pre></div><h5 id="docker-112-and-lower">Docker 1.12 and lower:</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker run -it --cpu-period<span style="color:#f92672">=</span><span style="color:#ae81ff">100000</span> --cpu-quota<span style="color:#f92672">=</span><span style="color:#ae81ff">50000</span> ubuntu /bin/bash
</code></pre></div>

<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/container/docker/container_logging/" title="Logging"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/sw_architecture/" title="3. S/W Architecture" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1604841359"></script>
    <script src="/js/perfect-scrollbar.min.js?1604841359"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1604841359"></script>
    <script src="/js/jquery.sticky.js?1604841359"></script>
    <script src="/js/featherlight.min.js?1604841359"></script>
    <script src="/js/highlight.pack.js?1604841359"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1604841359"></script>
    <script src="/js/learn.js?1604841359"></script>
    <script src="/js/hugo-learn.js?1604841359"></script>

    <link href="/mermaid/mermaid.css?1604841359" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1604841359"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

